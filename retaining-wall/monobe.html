<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mononobe-Okabe Calculation with Vue.js</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/foundation-sites@6.7.5/dist/css/foundation.min.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f4;
            color: #333;
        }
        .container {
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .form-label {
            margin-top: 10px;
            font-weight: bold;
        }
        #results {
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            line-height: 1.5;
            border-left: 4px solid #007bff;
        }
        input[type=number] {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-top: 5px;
        }
        select {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-top: 5px;
        }
        .cell {
            padding: 10px;
        }
        .calculate-button {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .calculate-button:hover {
            background-color: #0056b3;
        }
        .result-item {
            margin-bottom: 10px;
        }
        .result-label {
            font-weight: bold;
        }
        .section-header {
            font-size: 1.2em;
            margin-top: 20px;
            margin-bottom: 10px;
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div id="app" class="container">
        <div class="grid-x grid-padding-x">
            <div class="cell small-12">
                <div class="section-header">Embankment Parameters:</div>
                <label class="form-label" for="soil_weight">Unit Weight of Soil (γ<sub>moist</sub>) (kN/m³):</label>
                <input type="number" id="soil_weight" v-model.number="parameters.soil_weight">

                <label class="form-label" for="h_wall">Height of Embankment (H) (m):</label>
                <input type="number" id="h_wall" v-model.number="parameters.h_wall">

                <label class="form-label" for="angle_embankment">Angle of Embankment Slope (α) (deg):</label>
                <input type="number" id="angle_embankment" v-model.number="parameters.angle_embankment">

                <label class="form-label" for="angle_friction">Angle of Internal Friction (φ) (deg):</label>
                <input type="number" id="angle_friction" v-model.number="parameters.angle_friction">

                <label class="form-label" for="angle_inclination">Angle of Inclination of Inner Wall Face from Horizontal (θ) (deg):</label>
                <input type="number" id="angle_inclination" v-model.number="parameters.angle_inclination">

                <label class="form-label" for="angle_friction_wall_soil">Angle of Friction between Wall and Soil (δ) (deg):</label>
                <input type="number" id="angle_friction_wall_soil" v-model.number="parameters.angle_friction_wall_soil">
            </div>

            <div class="cell small-12">
                <div class="section-header">Surcharge Parameters:</div>
                <label class="form-label" for="surcharge_type">Type of Surcharge Loading:</label>
                <select id="surcharge_type" v-model="parameters.surcharge_type">
                    <option>None</option>
                    <!-- Add other options as needed -->
                </select>

                <label class="form-label" for="surcharge_load">Surcharge Load at Top of Embankment (Q) (kN):</label>
                <input type="number" id="surcharge_load" v-model.number="parameters.surcharge_load">

                <label class="form-label" for="surcharge_length">Length of Surcharge Load Perpendicular to Wall (L) (m):</label>
                <input type="number" id="surcharge_length" v-model.number="parameters.surcharge_length">

                <label class="form-label" for="surcharge_distance">Distance of Surcharge Load from Wall (D) (m):</label>
                <input type="number" id="surcharge_distance" v-model.number="parameters.surcharge_distance">

                <label class="form-label" for="surcharge_height">Equivalent Height of Vehicular Surcharge Live Load (H<sub>s</sub>) (m):</label>
                <input type="number" id="surcharge_height" v-model.number="parameters.surcharge_height">
            </div>

            <div class="cell small-12">
                <div class="section-header">Seismic Parameters:</div>
                <label class="form-label" for="pga">Peak Ground Acceleration (PGA) (g):</label>
                <input type="number" step="0.01" id="pga" v-model.number="parameters.pga">

                <label class="form-label" for="horizontal_acceleration">Horizontal Acceleration due to Earthquake (K<sub>H</sub>) (g):</label>
                <input type="number" step="0.01" id="horizontal_acceleration" v-model.number="parameters.horizontal_acceleration">

                <label class="form-label" for="vertical_acceleration">Vertical Acceleration due to Earthquake (K<sub>V</sub>) (g):</label>
                <input type="number" step="0.01" id="vertical_acceleration" v-model.number="parameters.vertical_acceleration">

                <button class="calculate-button" @click="calculate">Calculate</button>
            </div>
        </div>
        <div id="results" v-if="results.length">
            <div class="result-item" v-for="result in results">
                <span class="result-label">{{ result.label }}:</span> {{ result.value }}
            </div>
        </div>
    </div>
    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return { 
                    parameters: {
                        soil_weight: 15.0,
                        h_wall: 0.45,
                        angle_friction: 28.0,
                        angle_embankment: 0.0,
                        angle_inclination: 90.0,
                        angle_friction_wall_soil: 14.0,
                        surcharge_type: 'None',
                        surcharge_load: 0.0,
                        surcharge_length: 0.0,
                        surcharge_distance: 0.0,
                        surcharge_height: 1.50,
                        pga: 0.60,
                        horizontal_acceleration: 0.60,
                        vertical_acceleration: 0.63
                    },
                    results: []
                };
            },
            methods: {
                calculate_coefficients(PGA) {
                    const kh = 0.5 * PGA;
                    const kv = 0;
                    return [kh, kv];
                },
                incHorAcc(kh, kv) {
                    const theta_solve_init = kh / (1 - kv);
                    const theta = Math.atan(theta_solve_init);
                    const toDegree = (theta * 180) / Math.PI;
                    return toDegree;
                },
                calculate_ko(angle_friction) {
                    return 1 - Math.sin((angle_friction * Math.PI) / 180);
                },
                staticActivePressureCoefficient(alpha, beta, delta, phi) {
                    const varia_a = Math.pow(Math.sin((beta + phi) * Math.PI / 180), 2);
                    const varia_b = Math.sin((phi + delta) * Math.PI / 180) * Math.sin((phi - alpha) * Math.PI / 180);
                    const varia_c = Math.sin((beta - delta) * Math.PI / 180) * Math.sin((beta + alpha) * Math.PI / 180);
                    const varia_d = Math.pow(1 + Math.sqrt(varia_b / varia_c), 2);
                    const varia_e = Math.pow(Math.sin(beta * Math.PI / 180), 2) * Math.sin((beta - delta) * Math.PI / 180) * varia_d;
                    const results = varia_a / varia_e;
                    return results;
                },
                staticPassivePressureCoefficient(alpha, beta, delta, phi) {
                    const varia_a = Math.pow(Math.sin((beta - phi) * Math.PI / 180), 2);
                    const varia_b = Math.sin((phi + delta) * Math.PI / 180) * Math.sin((phi + alpha) * Math.PI / 180);
                    const varia_c = Math.sin((beta + delta) * Math.PI / 180) * Math.sin((beta + alpha) * Math.PI / 180);
                    const varia_d = Math.pow(1 - Math.sqrt(varia_b / varia_c), 2);
                    const varia_e = Math.pow(Math.sin(beta * Math.PI / 180), 2) * Math.sin((beta - delta) * Math.PI / 180) * varia_d;
                    const results = varia_a / varia_e;
                    return results;
                },
                staticActiveSeismicPressureCoefficient(alpha, beta, delta, phi, theta) {
                    const varia_a = Math.pow(Math.sin((beta + phi - theta) * Math.PI / 180), 2);
                    const varia_b = Math.sin((phi + delta) * Math.PI / 180) * Math.sin((phi - alpha - theta) * Math.PI / 180);
                    const varia_c = Math.sin((beta - delta - theta) * Math.PI / 180) * Math.sin((beta + alpha) * Math.PI / 180);
                    const varia_d = Math.pow(1 + Math.sqrt(varia_b / varia_c), 2);
                    const varia_e = Math.cos(theta * Math.PI / 180) * Math.pow(Math.sin(beta * Math.PI / 180), 2) * Math.sin((beta - delta - theta) * Math.PI / 180) * varia_d;
                    const results = varia_a / varia_e;
                    return results;
                },
                calculate_deltaKa(kae, kv, ka) {
                    const deltaKa = kae * (1 - kv) - ka;
                    return deltaKa;
                },
                calculate() {
                    this.results = [];  // Clear previous results

                    const PGA = this.parameters.pga;
                    const [kh, kv] = this.calculate_coefficients(PGA);
                    const coefficient_seis = this.incHorAcc(kh, kv);
                    const ko = this.calculate_ko(this.parameters.angle_friction);
                    const ka = this.staticActivePressureCoefficient(
                        this.parameters.angle_embankment,
                        this.parameters.angle_inclination,
                        this.parameters.angle_friction_wall_soil,
                        this.parameters.angle_friction
                    );
                    const kp = this.staticPassivePressureCoefficient(
                        this.parameters.angle_embankment,
                        this.parameters.angle_inclination,
                        this.parameters.angle_friction_wall_soil,
                        this.parameters.angle_friction
                    );
                    const kae = this.staticActiveSeismicPressureCoefficient(
                        this.parameters.angle_embankment,
                        this.parameters.angle_inclination,
                        this.parameters.angle_friction_wall_soil,
                        this.parameters.angle_friction,
                        coefficient_seis
                    );
                    const deltaKa = this.calculate_deltaKa(kae, kv, ka);

                    // Display results
                    this.results.push(
                        { label: 'At-Rest Earth Pressure Coefficient (Ko)', value: ko.toFixed(2) },
                        { label: 'Active Earth Pressure Coefficient (Ka)', value: ka.toFixed(2) },
                        { label: 'Passive Earth Pressure Coefficient (Kp)', value: kp.toFixed(2) },
                        { label: 'Active Earth Pressure due to Seismic (Kae)', value: kae.toFixed(2) },
                        { label: 'Change in Active Earth Pressure due to Seismic (ΔKa)', value: deltaKa.toFixed(2) }
                    );
                }
            }
        }).mount('#app');
    </script>
</body>
</html>
